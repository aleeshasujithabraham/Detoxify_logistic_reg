<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detoxify â€” YouTube Comment Analyzer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.2/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.4/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <!-- Animated mesh gradient background -->
    <div class="bg-gradient"></div>

    <!-- Floating sparkle particles -->
    <div class="particles" id="particles"></div>

    <!-- Floating blobs -->
    <div class="bg-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
        <div class="shape shape-4"></div>
        <div class="shape shape-5"></div>
        <div class="shape shape-6"></div>
    </div>

    <!-- Header -->
    <header>
        <div class="logo">
            <div class="logo-icon">
                <svg width="26" height="26" viewBox="0 0 24 24" fill="none">
                    <path d="M9 12l2 2 4-4" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z" stroke="white" stroke-width="1.8" fill="none"/>
                </svg>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <section class="hero">
            <h1><span class="gradient-text">Detoxify</span></h1>
        </section>

        <!-- URL Input Section -->
        <section class="input-section">
            <div class="input-card">
                <div class="input-wrapper">
                    <div class="input-icon">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
                            <rect x="2" y="4" width="20" height="16" rx="4" stroke="currentColor" stroke-width="1.8" fill="none"/>
                            <polygon points="10,8.5 16,12 10,15.5" fill="currentColor" opacity="0.8"/>
                        </svg>
                    </div>
                    <input type="text" id="youtubeUrl" placeholder="Paste any YouTube URL here..." autocomplete="off" spellcheck="false">
                    <button id="analyzeBtn" onclick="fetchComments()">
                        <span class="btn-text">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
                                <circle cx="11" cy="11" r="8"/>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                            </svg>
                            Analyze
                        </span>
                        <span class="btn-loader" style="display:none;">
                            <svg width="18" height="18" viewBox="0 0 24 24" class="spinner">
                                <circle cx="12" cy="12" r="10" stroke="white" stroke-width="3" fill="none" stroke-dasharray="31.4 31.4" stroke-linecap="round"/>
                            </svg>
                        </span>
                    </button>
                </div>
                <div class="url-examples">
                    <span class="url-tag">youtube.com</span>
                    <span class="url-tag">youtu.be</span>
                    <span class="url-tag">shorts</span>
                    <span class="url-hint-text">â€” all formats supported</span>
                </div>
            </div>
        </section>

        <!-- Feature pills -->
        <section class="features-row">
            <div class="feature-pill">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                AI-Powered
            </div>
            <div class="feature-pill">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                Toxicity Detection
            </div>
            <div class="feature-pill">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                Safety First
            </div>
        </section>

        <!-- Error Display -->
        <div id="errorDisplay" class="error-display" style="display:none;">
            <div class="error-content">
                <div class="error-icon">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="15" y1="9" x2="9" y2="15"/>
                        <line x1="9" y1="9" x2="15" y2="15"/>
                    </svg>
                </div>
                <span id="errorMessage"></span>
            </div>
        </div>

        <!-- Video Info Section -->
        <section id="videoInfo" class="video-info" style="display:none;">
            <div class="video-card">
                <div class="video-thumbnail">
                    <img id="videoThumbnail" src="" alt="Video thumbnail">
                    <div class="thumbnail-overlay">
                        <svg width="36" height="36" viewBox="0 0 24 24" fill="white" opacity="0.9">
                            <polygon points="9.5,7 17,12 9.5,17"/>
                        </svg>
                    </div>
                </div>
                <div class="video-details">
                    <h2 id="videoTitle"></h2>
                    <p class="channel-name">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" opacity="0.5">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                        </svg>
                        <span id="videoChannel"></span>
                    </p>
                    <div class="video-stats">
                        <div class="stat">
                            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                <circle cx="12" cy="12" r="3"/>
                            </svg>
                            <span id="videoViews"></span>
                        </div>
                        <div class="stat">
                            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                            </svg>
                            <span id="videoLikes"></span>
                        </div>
                        <div class="stat">
                            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                            </svg>
                            <span id="videoCommentCount"></span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Analysis Dashboard -->
        <section id="analysisDashboard" class="analysis-dashboard" style="display:none;">
            <div class="dashboard-card">
                <div class="dashboard-header">
                    <h3>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                        Safety Analysis
                    </h3>
                </div>
                <div class="dashboard-stats">
                    <div class="dash-stat safe-stat">
                        <div class="dash-stat-number" id="safeCount">0</div>
                        <div class="dash-stat-label">Safe</div>
                    </div>
                    <div class="dash-stat flagged-stat">
                        <div class="dash-stat-number" id="flaggedCount">0</div>
                        <div class="dash-stat-label">Flagged</div>
                    </div>
                    <div class="dash-stat high-stat">
                        <div class="dash-stat-number" id="highCount">0</div>
                        <div class="dash-stat-label">High</div>
                    </div>
                    <div class="dash-stat medium-stat">
                        <div class="dash-stat-number" id="mediumCount">0</div>
                        <div class="dash-stat-label">Medium</div>
                    </div>
                    <div class="dash-stat low-stat">
                        <div class="dash-stat-number" id="lowCount">0</div>
                        <div class="dash-stat-label">Low</div>
                    </div>
                </div>
                <div class="toxicity-bar-wrapper">
                    <div class="toxicity-label">
                        <span>Toxicity Level</span>
                        <span id="toxicityPercent" class="toxicity-percent">0%</span>
                    </div>
                    <div class="toxicity-bar">
                        <div class="toxicity-fill" id="toxicityFill" style="width: 0%"></div>
                    </div>
                </div>
                <button id="downloadPdfBtn" class="download-pdf-btn" onclick="generatePDF()">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <line x1="12" y1="18" x2="12" y2="12"/>
                        <polyline points="9 15 12 18 15 15"/>
                    </svg>
                    Download Report
                </button>
            </div>
        </section>

        <!-- Filter Tabs -->
        <section id="filterTabs" class="filter-tabs" style="display:none;">
            <button class="filter-btn active" data-filter="all" onclick="filterComments('all')">All</button>
            <button class="filter-btn" data-filter="safe" onclick="filterComments('safe')">Safe</button>
            <button class="filter-btn" data-filter="flagged" onclick="filterComments('flagged')">Flagged</button>
            <button class="filter-btn" data-filter="high" onclick="filterComments('high')">High Severity</button>
        </section>

        <!-- Comments Section -->
        <section id="commentsSection" class="comments-section" style="display:none;">
            <div class="comments-header">
                <div class="comments-title-row">
                    <h3>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/>
                        </svg>
                        Comments
                    </h3>
                    <span id="commentCountBadge" class="count-badge"></span>
                </div>
            </div>
            <div id="commentsList" class="comments-list"></div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <span>Built with ðŸ’œ for <strong>Tink-Her-Hack</strong></span>
            <span class="footer-dot">Â·</span>
            <span>Building safer spaces for women online</span>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Generate floating sparkle particles
        (function() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 25; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                p.style.left = Math.random() * 100 + '%';
                p.style.top = Math.random() * 100 + '%';
                p.style.animationDelay = (Math.random() * 10) + 's';
                p.style.animationDuration = (8 + Math.random() * 10) + 's';
                p.style.width = p.style.height = (2 + Math.random() * 3) + 'px';
                container.appendChild(p);
            }
        })();
    </script>
</body>
</html>
